<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ—ºç†Šç†ŠLand - åœ°å›¾ (å®Œæ•´ä¸»é¢˜ç‰ˆ)</title>
    <!-- é«˜å¾·åœ°å›¾å®‰å…¨å¯†é’¥é…ç½® -->
    <script>
        window._AMapSecurityConfig = {
            securityJsCode: '3c73c58ae84081248aa67daefac32179',
        };
    </script>
    <style>
        /* ---------- åŸºç¡€é‡ç½® & å…¨å±€å˜é‡ ---------- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            list-style: none;
            text-decoration: none;
        }
        body {
            min-height: 100vh;
            padding: 20px;
            transition: all 0.3s ease;
            font-family: "å¹¼åœ†", "Comic Sans MS", monospace;
        }

        /* æ•´ä½“é¡µé¢å¸ƒå±€ â€”â€” å·¦ä¾§ä¸»é¢˜åˆ‡æ¢å™¨ + å³ä¾§åœ°å›¾å†…å®¹åŒº */
        .page-layout {
            display: flex;
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
            align-items: flex-start;
            justify-content: center;
        }

        /* å·¦ä¾§ä¸»é¢˜åˆ‡æ¢å™¨ (å‚ç›´) */
        .theme-switcher {
            display: flex;
            flex-direction: column;
            gap: 10px;
            width: 130px;
            margin-top: 20px;
            flex-shrink: 0;
        }
        .theme-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #444;
            text-align: center;
            width: 100%;
            border-bottom: 1px solid #ccc;
            padding-bottom: 5px;
        }
        .theme-btn {
            padding: 12px 8px;
            border: none;
            border-radius: 8px;
            color: #fff;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: bold;
            width: 100%;
            text-align: center;
        }
        .theme-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .theme-btn.active {
            position: relative;
            animation: pulse 1.5s infinite;
            padding-left: 36px;
        }
        .theme-btn.active::before {
            content: "â˜";
            position: absolute;
            left: 18px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 20px;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 0 2px #000;
            font-family: "å¹¼åœ†";
        }
        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
            50% { transform: scale(1.02); box-shadow: 0 4px 14px rgba(0,0,0,0.2); }
            100% { transform: scale(1); box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        }

        /* å³ä¾§ä¸»å†…å®¹å®¹å™¨ */
        .main-content {
            flex: 1 1 auto;
            min-width: 0;
            background: #fff;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
            max-width: 100%;
        }

        /* ========== å¯¼èˆªæ  ========== */
        .nav {
            justify-content: center;
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            padding: 10px;
            border-radius: 10px;
            flex-wrap: wrap;
        }
        .nav li a {
            display: block;
            padding: 12px 20px;
            border-radius: 8px;
            color: #fff;
            font-weight: bold;
            transition: all 0.2s ease;
        }
        .nav li a:hover {
            transform: translateY(-2px);
        }

        /* ========== å¸¦ GIF çš„æ ‡é¢˜ ========== */
        .title-with-images {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }
        .side-gif {
            width: 80px;
            border-radius: 50%;
        }
        h1 {
            font-size: 36px;
            margin: 20px 0;
            text-align: center;
            padding: 15px;
            border-radius: 12px;
        }

        /* ----- åœ°å›¾åŠŸèƒ½åŒºæ ·å¼ (æ–°å¢åœ°å›¾åŒ…è£…å™¨) ----- */
        .tips {
            text-align: center;
            color: #666;
            margin: 5px 0 15px;
            font-size: 14px;
        }

        /* åœ°å›¾åŒ…è£…å™¨ï¼šæ¡Œé¢ç«¯å  main-content å®½åº¦çš„ 80%ï¼Œå±…ä¸­ */
        .map-wrapper {
            width: 90%;
            margin: 0 auto;
            transition: width 0.2s ease;
        }

        /* æ§åˆ¶æ¡ï¼šåŒ…å«æ ·å¼åˆ‡æ¢å™¨(å·¦)å’Œç¼©æ”¾æŒ‰é’®(å³) */
        .map-control-bar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
            gap: 15px;
            flex-wrap: wrap;
        }

        /* æ ·å¼åˆ‡æ¢å™¨ (å·¦) */
        .style-switcher {
            display: flex;
            align-items: center;
            gap: 10px;
            background-color: #f8f8f8;
            border-radius: 30px;
            padding: 4px 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            flex-wrap: wrap;
        }
        .style-switcher button {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
        }
        .style-switcher button:hover {
            background-color: rgba(0,0,0,0.1);
        }
        .style-switcher span {
            font-size: 16px;
            min-width: 70px;
            text-align: center;
            font-weight: 500;
        }

        /* ç¼©æ”¾æŒ‰é’®ç»„ (æ°´å¹³) */
        .zoom-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: flex-end;
        }
        .zoom-buttons button {
            width: 44px;
            height: 44px;
            font-size: 24px;
            font-weight: bold;
            border: none;
            background-color: #f5f5f5;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: all 0.2s;
        }
        .zoom-buttons button:hover {
            background-color: #e0e0e0;
            transform: scale(1.02);
        }

        /* åœ°å›¾å®¹å™¨ï¼šé•¿æ–¹å½¢ï¼Œå®½é«˜æ¯”éšçˆ¶å®¹å™¨å˜åŒ– */
        #mapContainer {
            width: 100%;
            height: 400px;
            border: 1px solid #ccc;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
            transition: all 0.2s;
            border-radius: 12px;
        }

        /* ä¸‹æ–¹æŒ‰é’®å’Œä¿¡æ¯æ¡† */
        .button-wrapper {
            text-align: center;
            margin: 20px 0 10px;
        }
        .button-wrapper button {
            font-size: 16px;
            padding: 8px 20px;
            margin: 0 5px;
            cursor: pointer;
            border: none;
            border-radius: 8px;
            transition: all 0.2s;
        }
        .info-box {
            width: 100%;
            min-height: 200px;
            margin: 10px auto;
            padding: 20px 25px;
            background-color: #f9f9fc;
            border: 1px solid #d0e0f0;
            border-radius: 12px;
            font-size: 16px;
            color: #1e2b3a;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            line-height: 1.6;
            overflow-y: auto;
            box-sizing: border-box;
        }
        .info-box .label {
            font-weight: 600;
            color: #1e6f9f;
            display: block;
            margin-bottom: 10px;
            font-size: 18px;
        }
        .info-box img {
            vertical-align: middle;
            margin-right: 10px;
            border-radius: 8px;
        }

        /* æ ‡è®°æ ·å¼ */
        .bear-marker, .star-marker, .pin-marker {
            font-size: 36px;
            cursor: pointer;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            transition: transform 0.1s;
        }
        .bear-marker:hover, .star-marker:hover, .pin-marker:hover {
            transform: scale(1.1);
        }

        /* ========== å››å¥—ä¸»é¢˜æ ·å¼ (å®Œæ•´ç‰ˆ) ========== */
        @font-face {
            font-family: "Minecraft AE";
            src: url("fonts/Minecraft AE(ch).ttf") format("truetype");
        }

        /* ---- å¡é€šç«¥è¶£é£ (theme-original) ---- */
        body.theme-original {
            background-color: #fff9e6;
            color: #333;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffb6c1' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E");
        }
        .theme-original .main-content {
            background: #fff;
            border: 4px solid #ff9eaa;
            box-shadow: 0 0 0 8px rgba(255,158,170,0.1);
        }
        .theme-original .nav {
            background-color: #87ceeb;
            border: 3px solid #4fc3f7;
        }
        .theme-original .nav li a {
            background-color: #4fc3f7;
            box-shadow: 0 4px 0 #d45e7a;
        }
        .theme-original .nav li a:hover {
            background-color: #2196f3;
            transform: translateY(-2px);
            box-shadow: 0 6px 0 #d45e7a;
        }
        .theme-original .nav li a.active {
            background-color: #ff6b8b;
        }
        .theme-original h1 {
            color: #ff6b8b;
            text-shadow: 2px 2px 0 #ffe0e7;
        }
        .theme-original .side-gif {
            border: 4px solid #ff9eaa;
            box-shadow: 0 0 0 4px rgba(255,158,170,0.2);
        }
        .theme-original .style-switcher {
            background-color: #ffe0e7;
            border: 1px solid #ff9eaa;
        }
        .theme-original .style-switcher button {
            color: #ff6b8b;
        }
        .theme-original .style-switcher span {
            color: #d45e7a;
        }
        .theme-original .zoom-buttons button {
            background-color: #4fc3f7;
            color: white;
            box-shadow: 0 4px 0 #2196f3;
        }
        .theme-original .zoom-buttons button:hover {
            background-color: #2196f3;
            transform: translateY(-2px);
            box-shadow: 0 6px 0 #1976d2;
        }
        .theme-original #mapContainer {
            border: 5px solid #ff9eaa;
            border-radius: 16px;
            box-shadow: 0 0 0 8px rgba(255,158,170,0.1), 0 8px 16px rgba(0,0,0,0.1);
        }
        .theme-original .info-box {
            background-color: #fff0f5;
            border-color: #ff9eaa;
        }
        .theme-original .button-wrapper button {
            background-color: #4fc3f7;
            color: white;
            box-shadow: 0 4px 0 #2196f3;
        }
        .theme-original #btn-original { background-color: #ff6b8b; }

        /* ---- ç³–æœç¼¤çº·é£ (theme-candy) ---- */
        body.theme-candy {
            background-color: #fff0f5;
            color: #555;
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffc0cb' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }
        .theme-candy .main-content {
            background: linear-gradient(145deg,#fff 0,#fff9fb 100%);
            border: 5px solid #ff85a2;
            border-radius: 24px;
            box-shadow: 0 0 0 10px rgba(255,133,162,0.1), 0 8px 24px rgba(0,0,0,0.08);
        }
        .theme-candy .nav {
            background: linear-gradient(90deg,#87cefa,#99ddff);
            border: 3px solid #66c2ff;
            border-radius: 50px;
        }
        .theme-candy .nav li a {
            background: linear-gradient(145deg,#66c2ff,#4fc3f7);
            border-radius: 50px;
            border: 2px solid rgba(255,255,255,0.3);
        }
        .theme-candy .nav li a:hover {
            background: linear-gradient(145deg,#4fc3f7,#2196f3);
            border-color: #fff;
        }
        .theme-candy .nav li a.active {
            background: linear-gradient(145deg,#ff6b8b,#ff85a2);
        }
        .theme-candy h1 {
            background: linear-gradient(90deg,#ff6b8b,#ff99cc,#87cefa);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        .theme-candy .side-gif {
            border: 4px solid #ffdd55;
            box-shadow: 0 0 0 4px rgba(255,221,85,0.2);
        }
        .theme-candy .style-switcher {
            background: #ffe6ef;
            border: 1px solid #ff85a2;
        }
        .theme-candy .style-switcher button {
            color: #ff6b8b;
        }
        .theme-candy .style-switcher span {
            color: #d45e7a;
        }
        .theme-candy .zoom-buttons button {
            background: linear-gradient(145deg,#66c2ff,#4fc3f7);
            border: 2px solid rgba(255,255,255,0.3);
            color: white;
            border-radius: 50px;
        }
        .theme-candy .zoom-buttons button:hover {
            background: linear-gradient(145deg,#4fc3f7,#2196f3);
            border-color: #fff;
            transform: translateY(-2px);
        }
        .theme-candy #mapContainer {
            border: 5px solid #87cefa;
            border-radius: 20px;
            box-shadow: 0 10px 20px rgba(135,206,250,0.2);
        }
        .theme-candy .info-box {
            background: #fff9fb;
            border-color: #ff85a2;
        }
        .theme-candy .button-wrapper button {
            background: linear-gradient(145deg,#66c2ff,#4fc3f7);
            border: 2px solid rgba(255,255,255,0.3);
            color: white;
            border-radius: 50px;
        }
        .theme-candy #btn-candy { background: linear-gradient(90deg,#ff6b8b,#ff99cc,#87cefa); }

        /* ---- æ£®æ—æ²»æ„ˆé£ (theme-forest) ---- */
        body.theme-forest {
            background-color: #f5f9f0;
            color: #4a5a45;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23a8d08d' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E");
        }
        .theme-forest .main-content {
            background: #fff;
            border: 4px solid #c19a6b;
            box-shadow: 0 0 0 8px rgba(193,154,107,0.1), 0 8px 16px rgba(0,0,0,0.08);
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11.8 2.8c3.12 0 5.6 2.48 5.6 5.6s-2.48 5.6-5.6 5.6c-3.12 0-5.6-2.48-5.6-5.6s2.48-5.6 5.6-5.6zm29 0c3.12 0 5.6 2.48 5.6 5.6s-2.48 5.6-5.6 5.6c-3.12 0-5.6-2.48-5.6-5.6s2.48-5.6 5.6-5.6zm29 0c3.12 0 5.6 2.48 5.6 5.6s-2.48 5.6-5.6 5.6c-3.12 0-5.6-2.48-5.6-5.6s2.48-5.6 5.6-5.6zm29 0c3.12 0 5.6 2.48 5.6 5.6s-2.48 5.6-5.6 5.6c-3.12 0-5.6-2.48-5.6-5.6s2.48-5.6 5.6-5.6z' fill='%23f8f5f0' fill-opacity='0.6' fill-rule='evenodd'/%3E%3C/svg%3E");
        }
        .theme-forest .nav {
            background-color: #8fbc8f;
            border: 3px solid #6f9e6f;
        }
        .theme-forest .nav li a {
            background-color: #7ccd7c;
            border: 2px solid #4f7317;
        }
        .theme-forest .nav li a:hover {
            background-color: #66c266;
        }
        .theme-forest .nav li a.active {
            background-color: #c19a6b;
        }
        .theme-forest h1 {
            color: #6b8e23;
            text-shadow: 2px 2px 0 #e8f0d6;
        }
        .theme-forest .side-gif {
            border: 3px solid #c19a6b;
        }
        .theme-forest .style-switcher {
            background: #e8f0d6;
            border: 1px solid #8fbc8f;
        }
        .theme-forest .style-switcher button {
            color: #6b8e23;
        }
        .theme-forest .style-switcher span {
            color: #4f7317;
        }
        .theme-forest .zoom-buttons button {
            background-color: #7ccd7c;
            color: white;
            border: 2px solid #4f7317;
        }
        .theme-forest .zoom-buttons button:hover {
            background-color: #66c266;
        }
        .theme-forest #mapContainer {
            border: 5px solid #8fbc8f;
            border-radius: 16px;
            box-shadow: 0 0 0 8px rgba(143,188,143,0.1), 0 8px 16px rgba(0,0,0,0.08);
        }
        .theme-forest .info-box {
            background-color: #f8f5f0;
            border-color: #c19a6b;
        }
        .theme-forest .button-wrapper button {
            background-color: #7ccd7c;
            color: white;
            border: 2px solid #4f7317;
        }
        .theme-forest #btn-forest { background-color: #6b8e23; }

        /* ---- æˆ‘çš„ä¸–ç•Œåƒç´ é£ (theme-pixel) ---- */
        body.theme-pixel {
            font-family: "Minecraft AE", "å¹¼åœ†", "Comic Sans MS", monospace;
            background-color: #e0e0e0;
            color: #2a2a2a;
            background-image: url("data:image/svg+xml,%3Csvg width='64' height='64' viewBox='0 0 64 64' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8 16c4.418 0 8-3.582 8-8s-3.582-8-8-8-8 3.582-8 8 3.582 8 8 8zm0-2c3.314 0 6-2.686 6-6s-2.686-6-6-6-6 2.686-6 6 2.686 6 6 6zm33.414-6l5.95-5.95L45.95.636 40 6.586 34.05.636 32.636 2.05 38.586 8l-5.95 5.95 1.414 1.414L40 9.414l5.95 5.95 1.414-1.414L41.414 8zM40 48c4.418 0 8-3.582 8-8s-3.582-8-8-8-8 3.582-8 8 3.582 8 8 8zm0-2c3.314 0 6-2.686 6-6s-2.686-6-6-6-6 2.686-6 6 2.686 6 6 6zM9.414 40l5.95-5.95-1.414-1.414L8 38.586l-5.95-5.95L.636 34.05 6.586 40l-5.95 5.95 1.414 1.414L8 41.414l5.95 5.95 1.414-1.414L9.414 40z' fill='%23969696' fill-opacity='0.05' fill-rule='evenodd'/%3E%3C/svg%3E");
            font-size: 16px;
            line-height: 1;
            image-rendering: pixelated;
            -webkit-font-smoothing: none;
            -moz-osx-font-smoothing: grayscale;
            font-smooth: never;
            text-rendering: optimizeSpeed;
        }
        .theme-pixel .main-content {
            background: #c69c6d;
            background-image: url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0h8v8H0V0zm8 8h8v8H8V8zM0 8h8v8H0V8zm8 0h8v8H8V8z' fill='%23966c42' fill-opacity='0.2' fill-rule='evenodd'/%3E%3C/svg%3E");
            border-radius: 0;
            border: 6px solid #8b5a2b;
            box-shadow: 8px 8px 0 #4a3218;
        }
        .theme-pixel .nav {
            background: #4040a0;
            border: 4px solid #000;
            border-radius: 0;
            background-image: url("data:image/svg+xml,%3Csvg width='8' height='8' viewBox='0 0 8 8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0h8v8H0V0zm1 1h6v6H1V1z' fill='%23303080' fill-opacity='0.3' fill-rule='evenodd'/%3E%3C/svg%3E");
        }
        .theme-pixel .nav li a {
            border-radius: 0;
            background-color: #6060c0;
            border: 4px solid #000;
            text-shadow: 2px 2px 0 #000;
            box-shadow: 4px 4px 0 #202080;
            color: #fff;
        }
        .theme-pixel .nav li a:hover {
            background-color: #7070d0;
            transform: translate(2px,2px);
            box-shadow: 2px 2px 0 #202080;
        }
        .theme-pixel .nav li a.active {
            background-color: #ff3030;
        }
        .theme-pixel h1 {
            color: #fff;
            font-size: 24px;
            text-shadow: 3px 3px 0 #000;
            background: #808080;
            background-image: url("data:image/svg+xml,%3Csvg width='4' height='4' viewBox='0 0 4 4' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0h4v4H0V0zm1 1h2v2H1V1zm2 0h2v2H3V1zm-2 2h2v2H1V3zm2 0h2v2H3V3z' fill='%23696969' fill-opacity='0.3' fill-rule='evenodd'/%3E%3C/svg%3E");
            padding: 10px;
            border: 4px solid #000;
            max-width: 90%;
            margin-left: auto;
            margin-right: auto;
        }
        .theme-pixel .side-gif {
            border-radius: 0;
            border: 4px solid #ffaa00;
            box-shadow: 4px 4px 0 #000;
            background-color: #f0f0f0;
        }
        .theme-pixel .style-switcher {
            background: #8b5a2b;
            border: 4px solid #000;
            border-radius: 0;
            box-shadow: 4px 4px 0 #4a3218;
            color: #fff;
        }
        .theme-pixel .style-switcher button {
            color: #fff;
            background: #6060c0;
            border: 2px solid #000;
            border-radius: 0;
        }
        .theme-pixel .style-switcher span {
            color: #fff;
            text-shadow: 2px 2px 0 #000;
        }
        .theme-pixel .zoom-buttons button {
            border-radius: 0;
            background-color: #6060c0;
            border: 4px solid #000;
            text-shadow: 2px 2px 0 #000;
            box-shadow: 4px 4px 0 #202080;
            color: #fff;
        }
        .theme-pixel .zoom-buttons button:hover {
            background-color: #7070d0;
            transform: translate(2px,2px);
            box-shadow: 2px 2px 0 #202080;
        }
        .theme-pixel #mapContainer {
            border: 6px solid #507050;
            border-radius: 0;
            box-shadow: 8px 8px 0 #000;
        }
        .theme-pixel .info-box {
            background: #808080;
            border: 4px solid #000;
            box-shadow: 4px 4px 0 #4a3218;
            color: #fff;
            border-radius: 0;
        }
        .theme-pixel .button-wrapper button {
            border-radius: 0;
            background-color: #6060c0;
            border: 4px solid #000;
            text-shadow: 2px 2px 0 #000;
            box-shadow: 4px 4px 0 #202080;
            color: #fff;
        }
        .theme-pixel #btn-pixel {
            background-color: #8b5a2b;
            font-family: "Minecraft AE", monospace;
            text-shadow: 1px 1px 0 #000;
        }

        /* ä¸»é¢˜æŒ‰é’®å›ºå®šé…è‰² */
        #btn-original { background-color: #ff6b8b; }
        #btn-candy { background: linear-gradient(90deg,#ff6b8b,#ff99cc,#87cefa); }
        #btn-forest { background-color: #6b8e23; }
        #btn-pixel { background-color: #8b5a2b; font-family: "Minecraft AE", monospace; }

        /* ----- ç§»åŠ¨ç«¯é€‚é… (è¦†ç›– map-wrapper å®½åº¦ä¸º 100%) ----- */
        @media (max-width: 800px) {
            .page-layout {
                flex-direction: column;
                align-items: center;
                gap: 15px;
            }
            .theme-switcher {
                width: 100%;
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: center;
                gap: 8px;
                margin-top: 0;
            }
            .theme-btn {
                width: auto;
                padding: 10px 15px;
                font-size: 14px;
            }
            .main-content {
                width: 100%;
                max-width: 100%;
                padding: 20px;
            }
            .map-wrapper {
                width: 100%;
                margin: 0;
            }
            .map-control-bar {
                flex-direction: column;
                align-items: stretch;
                gap: 10px;
            }
            .style-switcher {
                justify-content: center;
            }
            .zoom-buttons {
                justify-content: center;
            }
            #mapContainer {
                height: 300px;
            }
            .title-with-images {
                gap: 10px;
            }
            .side-gif {
                width: 50px;
            }
            h1 {
                font-size: 28px;
            }
        }
    </style>
</head>
<body class="theme-original">
    <div class="page-layout">
        <!-- å·¦ä¾§ä¸»é¢˜åˆ‡æ¢å™¨ -->
        <div class="theme-switcher">
            <div class="theme-title">ä¸»é¢˜é€‰æ‹©</div>
            <button class="theme-btn" id="btn-original">å¡é€šç«¥è¶£</button>
            <button class="theme-btn" id="btn-candy">ç³–æœç¼¤çº·</button>
            <button class="theme-btn" id="btn-forest">æ£®æ—æ²»æ„ˆ</button>
            <button class="theme-btn" id="btn-pixel">å¤å¤åƒç´ </button>
        </div>

        <!-- å³ä¾§ä¸»å†…å®¹åŒº -->
        <div class="main-content">
            <!-- å¯¼èˆªæ  -->
            <ul class="nav">
                <li><a href="index.html">é¦–é¡µ</a></li>
                <li><a href="gallery.html">ç›¸å†Œ</a></li>
                <li><a href="#">å½±é›†</a></li>
                <li><a href="maptest.html" class="active">åœ°å›¾</a></li>
                <li><a href="BNU/BNUindex.html">BNU</a></li>
            </ul>

            <!-- å¸¦ GIF çš„æ ‡é¢˜ -->
            <div class="title-with-images">
                <img src="images/left.gif" alt="å·¦ä¾§åŠ¨å›¾" class="side-gif">
                <h1>ç†Šç†Šåœ°å›¾-test</h1>
                <img src="images/right.gif" alt="å³ä¾§åŠ¨å›¾" class="side-gif">
            </div>

            <!-- æç¤ºä¿¡æ¯ -->
            <div class="tips">
                ğŸŒŸ èšŒåŸ /æµå—å…¥å£ï¼ˆç¼©æ”¾<7æ—¶å¯è§ï¼‰ç‚¹å‡»å¯æ”¾å¤§åœ°å›¾è‡³å¯¹åº”åŸå¸‚<br>
                ğŸ» å°ç†Šæ˜¾ç¤ºä¸Šæ¬¡å®šä½ï¼ˆè‹¥æœ‰ï¼‰ï¼Œç‚¹å‡»æŒ‰é’®å¯æ›´æ–°ä½ç½®<br>
                ğŸ“ å›ºå®šå›¾é’‰ï¼ˆåŒ—äº¬ã€ä¸Šæµ·ã€å¹¿å·ã€å±±ä¸œå¤§å­¦ï¼‰ç‚¹å‡»æŸ¥çœ‹ä¿¡æ¯<br>
                â•â– ä¸Šæ–¹æŒ‰é’®å¯ç¼©æ”¾åœ°å›¾
            </div>

            <!-- åœ°å›¾åŒ…è£…å™¨ (æ¡Œé¢80% / ç§»åŠ¨100%) -->
            <div class="map-wrapper">
                <!-- æ§åˆ¶æ¡ï¼šæ ·å¼åˆ‡æ¢å™¨(å·¦) + ç¼©æ”¾æŒ‰é’®(å³) -->
                <div class="map-control-bar">
                    <div class="style-switcher">
                        <button id="stylePrevBtn" title="ä¸Šä¸€ä¸ªæ ·å¼">â—€</button>
                        <span id="currentStyleName">æ ‡å‡†</span>
                        <button id="styleNextBtn" title="ä¸‹ä¸€ä¸ªæ ·å¼">â–¶</button>
                    </div>
                    <div class="zoom-buttons">
                        <button id="zoomInBtn" title="æ”¾å¤§">+</button>
                        <button id="zoomOutBtn" title="ç¼©å°">-</button>
                    </div>
                </div>

                <!-- åœ°å›¾å®¹å™¨ (é•¿æ–¹å½¢) -->
                <div id="mapContainer"></div>

                <!-- ä¿¡æ¯æ˜¾ç¤ºæ¡† -->
                <div id="clickInfo" class="info-box">
                    <span class="label">ğŸ“ æ¬¢è¿ä½¿ç”¨</span>
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <img src="https://img.icons8.com/color/96/000000/worldwide-location.png" width="48" height="48" alt="åœ°å›¾å›¾æ ‡">
                        <span>ç‚¹å‡»åœ°å›¾ä¸Šçš„æ ‡è®°ï¼ŒæŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ã€‚<br>å°ç†Šï¼šä½ çš„ä½ç½®<br>æ˜Ÿæ˜Ÿï¼šåŸå¸‚å…¥å£ï¼ˆèšŒåŸ /æµå—ï¼‰<br>å›¾é’‰ï¼šåŸå¸‚/å­¦æ ¡ä¿¡æ¯</span>
                    </div>
                </div>

                <!-- ä¸‹æ–¹åŠŸèƒ½æŒ‰é’® -->
                <div class="button-wrapper">
                    <button id="locateBtn">æ›´æ–°ä½ç½®</button>
                    <button id="resetBtn">é‡ç½®è§†å›¾</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // é«˜å¾·åœ°å›¾KeyåŠæ‰€æœ‰åŠŸèƒ½é€»è¾‘ (å®Œå…¨ä¿ç•™)
        const AMAP_KEY = "9f623094f7f5e1b9b8ae58be7f213915";
        const STORAGE_KEY = 'AMAP_USER_LOCATION';
        const STYLE_STORAGE_KEY = 'MAP_STYLE_INDEX';

        const STYLES = [
            { id: 'amap://styles/normal', name: 'æ ‡å‡†' },
            { id: 'amap://styles/dark', name: 'å¹»å½±é»‘' },
            { id: 'amap://styles/light', name: 'æœˆå…‰é“¶' },
            { id: 'amap://styles/whitesmoke', name: 'è¿œå±±é»›' },
            { id: 'amap://styles/grey', name: 'é›…å£«ç°' },
            { id: 'amap://styles/fresh', name: 'è‰è‰²é’' },
            { id: 'amap://styles/graffiti', name: 'æ¶‚é¸¦' },
            { id: 'amap://styles/macaron', name: 'é©¬å¡é¾™' },
            { id: 'amap://styles/blue', name: 'é›é’è“' },
            { id: 'amap://styles/darkblue', name: 'æå¤œè“' },
            { id: 'amap://styles/wine', name: 'é…±ç±½' }
        ];
        let currentStyleIndex = 0;
        let map = null;
        let currentUserMarker = null;
        let bengbuEntryMarker = null;
        let jinanEntryMarker = null;

        const pinMarkersData = [
            { name: 'åŒ—äº¬', pos: [116.397428, 39.90923], emoji: 'ğŸ“', description: 'ä¸­å›½çš„é¦–éƒ½ï¼Œå†å²æ–‡åŒ–ååŸï¼Œæ‹¥æœ‰æ•…å®«ã€é•¿åŸç­‰è‘—åæ™¯ç‚¹ã€‚', image: 'https://img.icons8.com/color/96/000000/beijing.png' },
            { name: 'ä¸Šæµ·', pos: [121.473701, 31.230416], emoji: 'ğŸ“', description: 'å›½é™…åŒ–å¤§éƒ½å¸‚ï¼Œä¸œæ–¹æ˜ç ã€å¤–æ»©ã€è¿ªå£«å°¼ä¹å›­æ‰€åœ¨åœ°ã€‚', image: 'https://img.icons8.com/color/96/000000/shanghai.png' },
            { name: 'å¹¿å·', pos: [113.264435, 23.129163], emoji: 'ğŸ“', description: 'å—æ–¹ç»æµä¸­å¿ƒï¼Œç¾é£Ÿä¹‹éƒ½ï¼Œä»¥æ—©èŒ¶ã€å°è›®è…°ï¼ˆå¹¿å·å¡”ï¼‰é—»åã€‚', image: 'https://img.icons8.com/color/96/000000/canton-tower.png' },
            { name: 'å±±ä¸œå¤§å­¦', pos: [117.055, 36.675], emoji: 'ğŸ“', description: 'å±±ä¸œå¤§å­¦ï¼ˆShandong Universityï¼‰ï¼Œä½äºå±±ä¸œæµå—ï¼Œæ˜¯æ•™è‚²éƒ¨ç›´å±é‡ç‚¹ç»¼åˆæ€§å¤§å­¦ï¼Œä½åˆ—â€œ211å·¥ç¨‹â€ã€â€œ985å·¥ç¨‹â€ã€â€œåŒä¸€æµâ€ã€‚', image: 'https://img.icons8.com/color/96/000000/university.png' }
        ];

        // ä¸»é¢˜åˆ‡æ¢é€»è¾‘
        const body = document.body;
        const btnOriginal = document.getElementById('btn-original');
        const btnCandy = document.getElementById('btn-candy');
        const btnForest = document.getElementById('btn-forest');
        const btnPixel = document.getElementById('btn-pixel');
        const allBtns = [btnOriginal, btnCandy, btnForest, btnPixel];

        const savedTheme = localStorage.getItem('selectedTheme') || 'theme-original';
        body.className = savedTheme;

        function setActiveButtonFromBodyClass() {
            allBtns.forEach(btn => btn.classList.remove('active'));
            if (body.classList.contains('theme-original')) btnOriginal.classList.add('active');
            else if (body.classList.contains('theme-candy')) btnCandy.classList.add('active');
            else if (body.classList.contains('theme-forest')) btnForest.classList.add('active');
            else if (body.classList.contains('theme-pixel')) btnPixel.classList.add('active');
        }
        setActiveButtonFromBodyClass();

        function saveTheme(themeClass) { localStorage.setItem('selectedTheme', themeClass); }

        btnOriginal.addEventListener('click', function() {
            body.className = 'theme-original';
            setActiveButtonFromBodyClass();
            saveTheme('theme-original');
        });
        btnCandy.addEventListener('click', function() {
            body.className = 'theme-candy';
            setActiveButtonFromBodyClass();
            saveTheme('theme-candy');
        });
        btnForest.addEventListener('click', function() {
            body.className = 'theme-forest';
            setActiveButtonFromBodyClass();
            saveTheme('theme-forest');
        });
        btnPixel.addEventListener('click', function() {
            body.className = 'theme-pixel';
            setActiveButtonFromBodyClass();
            saveTheme('theme-pixel');
        });

        // é«˜å¾·åœ°å›¾åŠŸèƒ½
        function loadAMapScript() {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = `https://webapi.amap.com/maps?v=2.0&key=${AMAP_KEY}&callback=initAMap`;
                script.type = 'text/javascript';
                document.head.appendChild(script);
                window.initAMap = resolve;
                script.onerror = reject;
            });
        }

        function getUserLocation() {
            return new Promise((resolve, reject) => {
                if (!navigator.geolocation) return reject(new Error("æµè§ˆå™¨ä¸æ”¯æŒå®šä½"));
                navigator.geolocation.getCurrentPosition(
                    (position) => resolve({ lng: position.coords.longitude, lat: position.coords.latitude }),
                    (error) => {
                        let msg = "å®šä½å¤±è´¥";
                        if (error.code === error.PERMISSION_DENIED) msg = "ä½ç½®æƒé™è¢«æ‹’ç»";
                        else if (error.code === error.POSITION_UNAVAILABLE) msg = "ä½ç½®ä¿¡æ¯ä¸å¯ç”¨";
                        else if (error.code === error.TIMEOUT) msg = "å®šä½è¶…æ—¶";
                        reject(new Error(msg));
                    },
                    { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 }
                );
            });
        }

        function createBearMarker(position, mapInstance) {
            const marker = new AMap.Marker({
                position: position, title: "ä½ çš„å½“å‰ä½ç½®", map: mapInstance,
                content: '<div class="bear-marker">ğŸ»</div>', anchor: "bottom-center", cursor: 'pointer'
            });
            const infoWindow = new AMap.InfoWindow({ content: "<div style='padding: 10px;'>ğŸ» è¿™æ˜¯ä½ çš„å½“å‰ä½ç½®</div>", offset: new AMap.Pixel(0, -38) });
            marker.on("click", () => {
                const infoBox = document.getElementById('clickInfo');
                const lng = position[0].toFixed(6);
                const lat = position[1].toFixed(6);
                infoBox.innerHTML = `
                    <span class="label">ğŸ» å°ç†Šä½ç½®è¯¦æƒ…</span>
                    <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                        <img src="https://img.icons8.com/color/96/000000/bear.png" width="48" height="48" alt="å°ç†Šå›¾æ ‡">
                        <div><strong>ä½ çš„å½“å‰ä½ç½®</strong><br>ç»åº¦ï¼š${lng}<br>çº¬åº¦ï¼š${lat}</div>
                    </div>
                    <p style="margin-top:12px;">â±ï¸ ${new Date().toLocaleTimeString()}</p>
                `;
                infoWindow.open(mapInstance, marker.getPosition());
            });
            return marker;
        }

        function applyStyle(index) {
            if (!map) return;
            map.setMapStyle(STYLES[index].id);
            document.getElementById('currentStyleName').innerText = STYLES[index].name;
            localStorage.setItem(STYLE_STORAGE_KEY, index);
            currentStyleIndex = index;
        }

        async function initMap() {
            try {
                await loadAMapScript();
                const chinaCenter = [104.0, 35.0];
                map = new AMap.Map("mapContainer", { zoom: 5, center: chinaCenter, viewMode: '2D' });

                const savedStyleIndex = localStorage.getItem(STYLE_STORAGE_KEY);
                if (savedStyleIndex !== null && !isNaN(parseInt(savedStyleIndex))) {
                    currentStyleIndex = parseInt(savedStyleIndex);
                    if (currentStyleIndex < 0 || currentStyleIndex >= STYLES.length) currentStyleIndex = 0;
                } else currentStyleIndex = 0;
                applyStyle(currentStyleIndex);

                const bengbuPos = [117.38, 32.92];
                bengbuEntryMarker = new AMap.Marker({
                    position: bengbuPos, title: "èšŒåŸ ", map: map,
                    content: '<div class="star-marker">ğŸŒŸ</div>', anchor: "bottom-center", cursor: 'pointer'
                });
                bengbuEntryMarker.on("click", () => { map.setCenter(bengbuPos); map.setZoom(12); });

                const jinanPos = [117.0, 36.65];
                jinanEntryMarker = new AMap.Marker({
                    position: jinanPos, title: "æµå—", map: map,
                    content: '<div class="star-marker">ğŸŒŸ</div>', anchor: "bottom-center", cursor: 'pointer'
                });
                jinanEntryMarker.on("click", () => { map.setCenter(jinanPos); map.setZoom(12); });

                map.on('zoomchange', () => {
                    const z = map.getZoom();
                    if (z < 7) { bengbuEntryMarker?.show(); jinanEntryMarker?.show(); }
                    else { bengbuEntryMarker?.hide(); jinanEntryMarker?.hide(); }
                });

                pinMarkersData.forEach(item => {
                    const marker = new AMap.Marker({
                        position: item.pos, title: item.name, map: map,
                        content: `<div class="pin-marker">${item.emoji}</div>`, anchor: "bottom-center", cursor: 'pointer'
                    });
                    marker.on("click", () => {
                        document.getElementById('clickInfo').innerHTML = `
                            <span class="label">${item.emoji} ${item.name}</span>
                            <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                                <img src="${item.image}" width="48" height="48" alt="${item.name}">
                                <div><strong>${item.name}</strong><br>${item.description}</div>
                            </div>
                            <p style="margin-top:12px;">ğŸ“ ${item.pos[0].toFixed(4)}, ${item.pos[1].toFixed(4)}</p>
                        `;
                    });
                });

                const stored = localStorage.getItem(STORAGE_KEY);
                if (stored) {
                    try {
                        const pos = JSON.parse(stored);
                        if (Array.isArray(pos) && pos.length === 2) currentUserMarker = createBearMarker(pos, map);
                    } catch (e) {}
                }
            } catch (error) {
                alert("åœ°å›¾åŠ è½½å¤±è´¥ï¼š" + error.message);
            }
        }

        async function locateAndUpdateBear() {
            if (!map) return alert("åœ°å›¾æœªåˆå§‹åŒ–");
            const btn = document.getElementById('locateBtn');
            btn.innerText = 'å®šä½ä¸­...'; btn.disabled = true;
            try {
                const { lng, lat } = await getUserLocation();
                const newPos = [lng, lat];
                if (currentUserMarker) { currentUserMarker.setMap(null); currentUserMarker = null; }
                currentUserMarker = createBearMarker(newPos, map);
                map.setCenter(newPos); map.setZoom(15);
                localStorage.setItem(STORAGE_KEY, JSON.stringify(newPos));
            } catch (err) { alert("å®šä½å¤±è´¥ï¼š" + err.message); } 
            finally { btn.innerText = 'æ›´æ–°ä½ç½®'; btn.disabled = false; }
        }

        function resetToInitial() { if (map) { map.setCenter([104.0, 35.0]); map.setZoom(5); } }
        function zoomIn() { if (map) map.setZoom(map.getZoom() + 1); }
        function zoomOut() { if (map) map.setZoom(map.getZoom() - 1); }

        window.onload = () => {
            initMap();
            document.getElementById('locateBtn').addEventListener('click', locateAndUpdateBear);
            document.getElementById('resetBtn').addEventListener('click', resetToInitial);
            document.getElementById('zoomInBtn').addEventListener('click', zoomIn);
            document.getElementById('zoomOutBtn').addEventListener('click', zoomOut);
            document.getElementById('stylePrevBtn').addEventListener('click', () => {
                currentStyleIndex = (currentStyleIndex - 1 + STYLES.length) % STYLES.length;
                applyStyle(currentStyleIndex);
            });
            document.getElementById('styleNextBtn').addEventListener('click', () => {
                currentStyleIndex = (currentStyleIndex + 1) % STYLES.length;
                applyStyle(currentStyleIndex);
            });

            window.addEventListener('resize', function() {
                if (map) map.resize();
            });
        };
    </script>
</body>
</html>